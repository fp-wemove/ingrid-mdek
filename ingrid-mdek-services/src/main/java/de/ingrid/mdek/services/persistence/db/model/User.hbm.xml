<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE hibernate-mapping
  PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping package="de.ingrid.mdek.services.persistence.db.model">
   <class name="User" table="user">
      <id name="id" type="long" column="id">
         <generator class="hilo"/>
      </id>
      <version name="version" type="integer" column="version"/>
      <property name="parentId" type="long" column="parent_id"/>
      <property name="adrId" type="long" column="adr_id"/>
      <property name="createTime" type="string" column="create_time"/>
      <property name="modTime" type="string" column="mod_time"/>
      <property name="modUuid" type="string" column="mod_uuid"/>
      <property name="groupId" type="long" column="group_id"/>
      <property name="role" type="integer" column="role"/>

      <many-to-one name="group" class="Group" column="group_id" update="false" insert="false"/>
      <set name="users" table="user" inverse="true" cascade="all-delete-orphan">
         <key column="parent_id"/>
         <one-to-many class="User" not-found="ignore"/>
      </set>
      <set name="userPermissions" table="user_permission" inverse="true"
           cascade="all-delete-orphan">
         <key column="user_id"/>
         <one-to-many class="UserPermission" not-found="ignore"/>
      </set>
   </class>

</hibernate-mapping>